# ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å®Œäº†å ±å‘Š

## ğŸ“‹ å®Ÿè£…å®Œäº†é …ç›®

### Phase 1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨APIåŸºç›¤ âœ…

1. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ**
   - `database/migrations/add_manuscript_tables.sql` ã‚’ä½œæˆ
   - ä»¥ä¸‹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å®Ÿè£…ï¼š
     - `manuscript_worksheets`: ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆç®¡ç†
     - `manuscript_paragraphs`: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ç®¡ç†
     - `paragraph_citations`: å¼•ç”¨è«–æ–‡é–¢é€£
     - `manuscript_sections`: ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
     - `manuscript_drafts`: åŸç¨¿å…¨ä½“ç®¡ç†
   - RLSï¼ˆRow Level Securityï¼‰ãƒãƒªã‚·ãƒ¼ã‚’è¨­å®š

2. **ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆç®¡ç†API**
   - `POST /api/manuscript/worksheets`: ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆä½œæˆ
   - `GET /api/manuscript/worksheets`: ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆä¸€è¦§å–å¾—
   - `GET /api/manuscript/worksheets/[id]`: ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆè©³ç´°å–å¾—
   - `PUT /api/manuscript/worksheets/[id]`: ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆæ›´æ–°
   - `DELETE /api/manuscript/worksheets/[id]`: ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆå‰Šé™¤
   - `POST /api/manuscript/worksheets/upload`: ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

3. **ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ç®¡ç†API**
   - `GET /api/manuscript/paragraphs`: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä¸€è¦§å–å¾—
   - `GET /api/manuscript/paragraphs/[id]`: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•è©³ç´°å–å¾—
   - `PUT /api/manuscript/paragraphs/[id]`: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•æ›´æ–°
   - `POST /api/manuscript/paragraphs/[id]/generate`: AIæ–‡ç« ç”Ÿæˆ

4. **å¼•ç”¨è«–æ–‡ç®¡ç†API**
   - `GET /api/manuscript/paragraphs/[id]/citations`: å¼•ç”¨è«–æ–‡ä¸€è¦§å–å¾—
   - `POST /api/manuscript/paragraphs/[id]/citations`: å¼•ç”¨è«–æ–‡è¿½åŠ 
   - `DELETE /api/manuscript/paragraphs/[id]/citations/[citationId]`: å¼•ç”¨è«–æ–‡å‰Šé™¤

### Phase 2: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå®Ÿè£… âœ…

1. **ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆè§£æãƒ©ã‚¤ãƒ–ãƒ©ãƒª**
   - `src/lib/manuscript/worksheet-parser.ts`
   - Markdownå½¢å¼ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆã‚’è§£æ
   - ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•æ§‹é€ ï¼ˆP1, P2, etc.ï¼‰ã‚’è‡ªå‹•æŠ½å‡º
   - ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ã«åˆ†é¡ï¼ˆIntroduction, Methods, Results, Discussionï¼‰

2. **AIæ–‡ç« ç”Ÿæˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª**
   - `src/lib/manuscript/paragraph-generator.ts`
   - ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã®æ–‡ç« ç”Ÿæˆæ©Ÿèƒ½
   - æ—¢å­˜æ–‡ç« ã®è£œå®Œæ©Ÿèƒ½
   - å¼•ç”¨è«–æ–‡ã‚’çµ±åˆã—ãŸæ–‡ç« ç”Ÿæˆ

### Phase 3: UIå®Ÿè£… âœ…

1. **ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸**
   - `src/app/manuscript/page.tsx`
   - ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆä¸€è¦§è¡¨ç¤º
   - ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

2. **ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆè©³ç´°ãƒšãƒ¼ã‚¸**
   - `src/app/manuscript/[worksheetId]/page.tsx`
   - ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä¸€è¦§è¡¨ç¤º
   - ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
   - é€²æ—çŠ¶æ³è¡¨ç¤º

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

Supabaseã®SQL Editorã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```sql
-- database/migrations/add_manuscript_tables.sql ã®å†…å®¹ã‚’å®Ÿè¡Œ
```

### 2. ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

1. `/manuscript` ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€Œãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. Markdownå½¢å¼ã®ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹ï¼š`KIF6_Manuscript_Paragraph_Worksheet.md`ï¼‰ã‚’é¸æŠ
4. è‡ªå‹•çš„ã«ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•æ§‹é€ ãŒè§£æã•ã‚Œã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œã¾ã™

### 3. ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã®ç·¨é›†

1. ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆã‚’é¸æŠ
2. ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ä¸€è¦§ã‹ã‚‰ç·¨é›†ã—ãŸã„ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•è©³ç´°ãƒšãƒ¼ã‚¸ã§ç·¨é›†ãƒ»å¼•ç”¨è«–æ–‡ã®è¿½åŠ ãƒ»AIç”ŸæˆãŒå¯èƒ½

### Phase 4: ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•è©³ç´°æ©Ÿèƒ½ âœ…

1. **ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•è©³ç´°ãƒšãƒ¼ã‚¸**
   - `src/app/manuscript/[worksheetId]/paragraphs/[paragraphId]/page.tsx`
   - ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ï¼‰
   - å¼•ç”¨è«–æ–‡ç®¡ç†UIï¼ˆè¿½åŠ ãƒ»å‰Šé™¤ï¼‰
   - AIæ–‡ç« ç”ŸæˆUI
   - ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…æ¤œç´¢æ©Ÿèƒ½

2. **å¼•ç”¨è«–æ–‡æ¤œç´¢API**
   - `GET /api/manuscript/citations/search`: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå†…æ¤œç´¢

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆæœªå®Ÿè£…ï¼‰

ä»¥ä¸‹ã®æ©Ÿèƒ½ã¯ä»Šå¾Œå®Ÿè£…ãŒå¿…è¦ã§ã™ï¼š

1. **Webæ¤œç´¢æ©Ÿèƒ½**
   - Semantic Scholaræ¤œç´¢
   - PubMedæ¤œç´¢
   - arXivæ¤œç´¢

2. **ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†**
   - ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆãƒ»ç·¨é›†
   - ãƒ‘ãƒ©ã‚°ãƒ©ãƒ•ã¨ã®åŒæœŸ

3. **åŸç¨¿ç®¡ç†**
   - åŸç¨¿å…¨ä½“ã®ç”Ÿæˆ
   - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
   - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆPDF, DOCXï¼‰

4. **é«˜åº¦ãªæ©Ÿèƒ½**
   - å¼•ç”¨å½¢å¼ã®è‡ªå‹•ç”Ÿæˆï¼ˆAPA, Vancouver, Natureï¼‰
   - ç›¸äº’å‚ç…§è¡¨ç¤º
   - ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Next.js 15, React, TypeScript
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Next.js API Routes
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Supabase (PostgreSQL)
- **AI**: OpenAI GPT-4 Turbo
- **èªè¨¼**: Supabase Authï¼ˆRLSå¯¾å¿œï¼‰

## ğŸ“š å‚è€ƒè³‡æ–™

- ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸: `docs/PARAGRAPH_WRITING_SYSTEM.md`
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ: `database/migrations/add_manuscript_tables.sql`
- ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ¼ãƒˆè§£æ: `src/lib/manuscript/worksheet-parser.ts`

---
æœ€çµ‚æ›´æ–°: 2025-11-12 18:23:18 JST

